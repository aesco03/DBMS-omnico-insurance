<h2>Confirm Quote</h2>

<p class="text-muted">Please review the computed quote below. Accept to create the policy, or Cancel to edit.</p>

<div class="card mb-3">
  <div class="card-body">
    <h5>Coverage</h5>
    <ul>
      <li><strong>Type:</strong> <%= type_id === 1 ? 'Auto' : (type_id === 2 ? 'Home' : 'Other') %></li>
      <li><strong>Start:</strong> <%= start_date %></li>
      <li><strong>End:</strong> <%= end_date %></li>
    </ul>

    <% if (type_id === 1) { %>
      <h6>Auto facts</h6>
      <ul>
        <li>Make: <%= facts.vehicle_make || '-' %></li>
        <li>Model: <%= facts.vehicle_model || '-' %></li>
        <li>Year: <%= facts.vehicle_year || '-' %></li>
        <li>VIN: <%= facts.vehicle_vin || '-' %></li>
        <li>Coverage: <%= facts.auto_coverage_type || '-' %></li>
      </ul>
    <% } else if (type_id === 2) { %>
      <h6>Home facts</h6>
      <ul>
        <li>Address: <%= facts.property_address || '-' %></li>
        <li>Property value: $<%= facts.property_value || '-' %></li>
        <li>Deductible: $<%= facts.home_deductible || '-' %></li>
      </ul>
    <% } else if (type_id === 3) { %>
      <h6>Pet facts</h6>
      <ul>
        <li>Pet name: <%= facts.pet_name || '-' %></li>
        <li>Species: <%= facts.species || '-' %></li>
        <li>Age: <%= facts.pet_age || '-' %></li>
        <li>Deductible: $<%= facts.pet_deductible || '-' %></li>
      </ul>
      <% } else if (type_id === 4) { %>
      <h6>Renters facts</h6>
      <ul>
        <li>Rental address: <%= facts.rental_address || '-' %></li>
        <li>Personal property value: $<%= facts.personal_property_value || '-' %></li>
        <li>Term: <%= facts.renters_term || '-' %></li>
        <li>Coverage Type: <%= facts.renters_coverage_type || '-' %></li>
        <li>Deductible: $<%= facts.renters_deductible || '-' %></li>
      </ul>
      <% } else if (type_id === 5) { %>
      <h6>Business facts</h6>
      <ul>
        <li>Business name: <%= facts.business_name || '-' %></li>
        <li>Type: <%= facts.business_type || '-' %></li>
        <li>Industry: <%= facts.industry || '-' %></li>
        <li>Coverage Type: <%= facts.business_coverage_type || '-' %></li>
        <li>Deductible: $<%= facts.business_deductible || '-' %></li>
      </ul>
    <% } else if (type_id === 6) { %>
      <h6>Health facts</h6>
      <ul>
        <li>Provider: <%= facts.provider || '-' %></li>
        <li>Person name: <%= facts.health_person_name || '-' %></li>
        <li>Plan: <%= facts.plan || '-' %></li>
      </ul>
    <% } else if (type_id === 7) { %>
      <h6>Life facts</h6>
      <ul>
        <li>Beneficiary: <%= facts.beneficiary || '-' %></li>
        <li>Person name: <%= facts.life_person_name || '-' %></li>
        <li>Term: <%= facts.life_term || '-' %></li>
      </ul>
    <% } %>

    <h5>Computed Quote</h5>
    <ul>
      <li><strong>Premium:</strong> $<%= derived.premium %></li>
      <li><strong>Suggested coverage limit:</strong> $<%= derived.coverage_limit %></li>
    </ul>

    <form method="post" action="/policies/confirm">
      <!-- pass facts back as hidden fields; server will recompute for safety -->
      <input type="hidden" name="type_id" value="<%= type_id %>">
      <input type="hidden" name="start_date" value="<%= start_date %>">
      <input type="hidden" name="end_date" value="<%= end_date %>">

      <% if (type_id === 1) { %>
        <input type="hidden" name="vehicle_make" value="<%= facts.vehicle_make || '' %>">
        <input type="hidden" name="vehicle_model" value="<%= facts.vehicle_model || '' %>">
        <input type="hidden" name="vehicle_year" value="<%= facts.vehicle_year || '' %>">
        <input type="hidden" name="vehicle_vin" value="<%= facts.vehicle_vin || '' %>">
        <input type="hidden" name="auto_coverage_type" value="<%= facts.auto_coverage_type || '' %>">
      <% } else if (type_id === 2) { %>
        <input type="hidden" name="property_address" value="<%= facts.property_address || '' %>">
        <input type="hidden" name="property_value" value="<%= facts.property_value || '' %>">
        <input type="hidden" name="home_deductible" value="<%= facts.home_deductible || '' %>">
      <% } else if (type_id === 3) { %>
        <input type="hidden" name="pet_name" value="<%= facts.pet_name || '' %>">
        <input type="hidden" name="species" value="<%= facts.species || '' %>">
        <input type="hidden" name="pet_age" value="<%= facts.pet_age || '' %>">
        <input type="hidden" name="pet_deductible" value="<%= facts.pet_deductible || '' %>">
        <input type="hidden" name="pet_coverage_amount" value="<%= facts.pet_coverage_amount || '' %>">
      <% } else if (type_id === 4) { %>
        <input type="hidden" name="rental_address" value="<%= facts.rental_address || '' %>">
        <input type="hidden" name="personal_property_value" value="<%= facts.personal_property_value || '' %>">
        <input type="hidden" name="renters_term" value="<%= facts.renters_term || '' %>">
        <input type="hidden" name="renters_deductible" value="<%= facts.renters_deductible || '' %>">
        <input type="hidden" name="renters_coverage_type" value="<%= facts.renters_coverage_type || '' %>">
      <% } else if (type_id === 5) { %>
        <input type="hidden" name="business_name" value="<%= facts.business_name || '' %>">
        <input type="hidden" name="business_type" value="<%= facts.business_type || '' %>">
        <input type="hidden" name="industry" value="<%= facts.industry || '' %>">
        <input type="hidden" name="annual_revenue" value="<%= facts.annual_revenue || '' %>">
        <input type="hidden" name="number_of_employees" value="<%= facts.number_of_employees || '' %>">
        <input type="hidden" name="business_address" value="<%= facts.business_address || '' %>">
        <input type="hidden" name="contact_number" value="<%= facts.contact_number || '' %>">
        <input type="hidden" name="contact_email" value="<%= facts.contact_email || '' %>">
        <input type="hidden" name="business_deductible" value="<%= facts.business_deductible || '' %>">
        <input type="hidden" name="business_coverage_type" value="<%= facts.business_coverage_type || '' %>">
      <% } else if (type_id === 6) { %>
        <input type="hidden" name="provider" value="<%= facts.provider || '' %>">
        <input type="hidden" name="health_person_name" value="<%= facts.health_person_name || '' %>">
        <input type="hidden" name="plan" value="<%= facts.plan || '' %>">
        <input type="hidden" name="health_age" value="<%= facts.health_age || '' %>">
        <input type="hidden" name="health_deductible" value="<%= facts.health_deductible || '' %>">
      <% } else if (type_id === 7) { %>
        <input type="hidden" name="beneficiary" value="<%= facts.beneficiary || '' %>">
        <input type="hidden" name="life_person_name" value="<%= facts.life_person_name || '' %>">
        <input type="hidden" name="life_term" value="<%= facts.life_term || '' %>">
        <input type="hidden" name="life_age" value="<%= facts.life_age || '' %>">
        <input type="hidden" name="life_deductible" value="<%= facts.life_deductible || '' %>">
      <% } %>

      <button type="submit" class="btn btn-success">Accept Quote</button>
      <a href="/policies/new" class="btn btn-secondary">Cancel / Edit</a>
    </form>
  </div>
</div>
